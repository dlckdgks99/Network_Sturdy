# 6.1 데몬 프로세스
- 데몬 : 백그라운드로 실행되는 프로세스로서 특정 터미널의 제어와 관계없이 실행되는 프로세스를 말함.
- 데몬을 종료시키려면 kill 명령을 사용하거나 다른 프로세스에서 SIGKILL 시그널을 데몬으로 보내야 함
- TTY(터미널 장치)를 가지고 있지 않음
- PPID(parent id)가 1이고, SID(session id) 자신의 아이디와 같음
  
### 데몬 프로세스 생성
- 데몬 프로세스 생성 방법
  1. fork()를 호출하여 자식 프로세스를 만들고 부모 프로세스는 종료
  2. setsid()를 호출하여 자신을 새로운 프로세스 그룹의 리도로 만듬 =>자기를 생성한 부모의 터미널 PID와 관계를 끊기 위해
  3. 시그널 SOGHUP를 무시하겠다는 sigaction(()함수를 호출하고 자식 프로세스를 한 번더 만든 후 부모 프로세스 종료
  4. 두 번째 자식 프로세스는 이제 어떤 터미널과도 연관이 없다
  5. 작업 디렉토리를 루트 디렉토리로 변경하고 mask를 0으로 설정하여 새로 생성되는 파일이 임의의 소유 권한을 가질 수 있도록 함
  6. 혹시 부모 프로세스가 개설하였을지 모르는 소켓을 모두 닫기 위해 close() 실행
- setid()
  - 현재 프로세스를 새로운 세션(Session)의 리더로 만들고, 터미널과 완전히 분리하는 함수
### 데몬 서버 종류
- 서버 프로그램을 독립형 데몬으로 구현(Standalone)
  - httpd, sendmail, named
  - 항상 실행되고 있으면서 서비스를 제공해 주는 데몬
  - 특정 서비스를 위한 전용 프로그램이기에 빠르게 응답하나 항상 실행되어있기에 비효율적
- 슈퍼 데몬 (Inetd)
  - 여러 가지 인터넷 서비스 요청을 받아서 처리해 주는 종합겆인 인터넷 서비스용 데몬
  - echo, daytime같은 간단한 인터넷 서비스 요청은 Inetd에서 직접 처리
  - telnet, ftp와 같은 서비스 요청은 inetd가 그 서비스를 처리하기 위한 새로운 프로세스를 생성
  - 각 서비스를 구분하기 위해 포트번호 사용
 


# 🤔6장에 대한 내 생각
- sigaction 구조체 오류
  - #include <bits/sigaction.h>라이브러리에 있었음!!
- 포트 열려있는지 확인 명령어
  - sudo lsof -i :9901 
