서버를 멀티 프로세스 형태로 구현하는 경우에 프로세스 사이에 데이터를 주고받을 필요가 있으며 이를 위해 프로세스간 통신이 사용

# 8.1 파이프
- 파이프(pipe) : 운영체제가 제공하는 프로세스간 통신 채널로서 특별한 타입의 파일, 메모리에 저장되는 것이 아닌 운영체제가 관리하는 임시 파일, 데이터 저장용이 아닌 프로세스간 데이터 전달용으로 쓰임

### 파이프 생성
- pipe() : 파이프를 열기위한 함수
  - int pipe(int fd[2]); : fd[0]은 파이프로부터 데이터를 읽기위해 사용, fd[1]은 파이프에 데이터를 쓰기 위해 사용
  - 단방향 스트림 채널만 제공 => 양방향 통신을 하려면 파이프를 하나 더 생성

### 파이프를 이용한 에코 서버 프로그램
- 부모프로세스는 클라이언트로부터 받은 메시지를 파이프에 쓰고 자식 프로세스는 파이프로부터 데이터를 읽어서 클라이언트로 에코
- 자식 프로세스의 기능은 child_start()에 부모 프로세스 기능은 parent_start()에 구현

# 8.2 FIFO
### FIFO 생성
- 파이프 이름을 지정하고 가족관계가 아닌 임의의 다른 프로세스에서 이 이름을 통하여 파이픙에 접근하도록 한 것
- int mkfifo(const char *pathname, mode_t mode) : int mkfifo(파이프의 이름을 지정, 생성되는 FIFO 파일 접근 권한을 설정)
- FIFO의 이름만 알고 있으면 언제든지 FIFO를 open()하여 사용

# 8.3 메시지큐
- 파이프나 FIFO는 프로세스 사이에 스트림을 제공한다. 즉, 바이트 단위로 전송 순서가 유지되는 통신 채널을 제공
- 메시지큐는 특정 프로세스를 대상으로 메시지를 전송할 수 도 있고, 메시지 전송에 우선순위를 줄 수도있음

### 메시지큐 개요
- 임의의 프로세스는 메시지큐에 메시지를 쓰거나 메시지큐로부터 메시지를 읽을 수 있다.
- 실제로 메시지큐는 여러 개의 큐를 동시에 제공, 각 큐는 타입 값으로 구분
- 메시지큐에서는 지정된 타입에서 꺼내올 메시지가 없다면 그 보다 작은 타입의 큐에서 메시지를 꺼내오도록 할 수 있다.
- 이러한 성질을 이용하면 메시지큐에 우선순위를 줄 수 있음

### 메시지 큐 생성
- int msgget(key_t key, int msgflg) : int msgget(메시지큐를 구분하기 위한 고유 키, 메시지큐의 생성시 옵션을 지정)
- msgflag
  - IPC_CREAT : 해당 key로 메시지큐가 존재하지 않으면 새 메시지큐를 생성하라는 의미
  - IPC_EXCL : IPC_CREAT와 같이 써야하며, 같이 쓰면 이미 존재하는 key의 메시지큐가 있으면 실패시켜라
 
- ipcs -q : 현재 생성된 메시지큐를 볼 수 있음
- ipcrm -Q [key] : 생성된 메시지큐 삭제

### 메시지 송수신
- msgsnd() : 메시지큐에 메시지를 넣는 함수
  - int msgsnd(int msqid, struct msgbuf *msgp, size_t msgsz, int msgflg) :
- msgrcv() : 메시지큐로부터 메시지를 읽는 함수
  - int msgrcv(int msqud, struct *msgp, size_t msgsz, long msgtype, int msgflg);

### 메시지큐 제어
- msgctl() : 메시지큐에 관한 정보 읽기, 동작 허가 권한 변경, 메시지큐 삭제 등 메시지 큐를 제어하기 위한 함수
  - int msgctl(int msqis, int cmd, struct msqid_ds *buf);
    - int cmd 
      - IPC_STAT : 메시지큐 객체에 대한 정보를 얻어오는 명령
      - IPC_SET : r/w권한, euid, egid, msg_qbytes를 변경하는 명령
      - IPC_RMID : 메시지큐를 삭제

### 메시지큐를 이용한 에코 서버
- 

# 8.4 공유메모리
### 공유메모리 사용
- 공유메모리 생성
- 공유메모리 첨부
- 공유메모리 분리
- 공유메모리 제어
- 공유메모리 정보 얻기
- 공유메모리 삭제

### 공유메모리의 동기화문제 처리

# 8.5 세마포어
### 동기화문제
### 세마포어 사용
- 세마포어란?
- 세마포어 생성
- 세마포어 연산
- 세마포어 사용 예

### 세마포어 제어
- IPC_STAT
- SETVAL
- SETALL
- GETVAL
- GETALL
- GETNCNT
- GETPID
- IPC_RMID

### 세마포어 이용 예제
### 공유메모리의 동기화문제 처리
# 🤔 8장에 대한 내 생각
- 파이프는 read, write 수행, UDP 소켓은 recvfrom, sendto 실행
- bitmask 형태란? : 정수의 비트 하나하나를 플래그(flag)처럼 사용해 여러 상태를 한 변수 안에 압축해서 표현하는 기법
- 메시지큐를 이용한 에코 서버 실습을 통해 느낀점
  - 서버 아키텍처를 직접 c로 구현
